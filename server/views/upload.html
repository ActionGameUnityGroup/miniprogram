<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>上传</title>
</head>
<body>
  <!-- <form enctype="multipart/form-data" method="post" action="/api/audio/setAudio"> -->
    <div>
      <input type="file" name="audio"/>
      <input type="button" name="uploadAudio" value="提交" />
    </div>
    <br/>
    <br/>
    <br/>
    <div>
      <input type="file" name="banner"/>
      <input type="button" name="uploadBanner" value="提交" />
    </div>
  <!-- </form> -->
  <script>
    (function(){

      document.querySelector('input[name=uploadAudio]').onclick = () => {
        console.log('点击提交');
        // let reader = new FileReader();
        let file = document.querySelector('input[name=audio]').files[0];
        console.log(file);
        let formData = new FormData();
        // console.log(formData.get('file'));
        formData.append('file', file);
        // console.log(formData.get('file'));
        // reader.readAsDataURL(file);
        if (file) {
          // 请求接口
          fetch(
            'https://www.changdaolife.cn/api/audio/setAudio',
            {
              method: 'POST',
              body: formData,
            }
          ).then((res) => {
            if (res.ok) {
              res.json().then((data) => {
                console.log(data);
              });
            }
          }).catch((err) => {
            console.error(err);
          });
        } else {
          console.log('没有选择文件');
        }
      };

      document.querySelector('input[name=uploadBanner]').onclick = () => {
        console.log('点击提交');
        // let reader = new FileReader();
        let file = document.querySelector('input[name=banner]').files[0];
        console.log(file);
        let formData = new FormData();
        // console.log(formData.get('file'));
        formData.append('file', file);
        // console.log(formData.get('file'));
        // reader.readAsDataURL(file);
        if (file) {
          // 请求接口
          fetch(
            'https://www.changdaolife.cn/api/banner/setBanner?page=index',
            {
              method: 'POST',
              body: formData,
              header: {
                authorization: ''
              }
            }
          ).then((res) => {
            if (res.ok) {
              res.json().then((data) => {
                console.log(data);
              });
            }
          }).catch((err) => {
            console.error(err);
          });
        } else {
          console.log('没有选择文件');
        }
      };

    })()
  </script>
</body>
</html>