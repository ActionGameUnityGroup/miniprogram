<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>测试</title>
</head>
<body>
  <div>标题</div>
  <input type="button" value="获取数据" id='getBtn' />
  <input type="button" value="发送数据" id="postBtn" />
  <input type="button" value="更新数据" id='putBtn' />
  <input type="button" value="删除数据" id="deleteBtn" />
  <!-- <form action="http://192.168.1.104:3000/api/user/setUserInfo" method="POST">
    <input type="text" name="avatar" placeholder="avatar" />
    <input type="text" name="nickname" placeholder="nickname"/>
    <input type="text" name="sex" placeholder="sex"/>
    <input type="text" name="birthday" placeholder="birthday"/>
    <input type="text" name="name" placeholder="name"/>
    <input type="text" name="phonenumber" placeholder="phonenumber"/>
    <input type="text" name="address" placeholder="address"/>
    <input type="text" name="unionid" placeholder="unionid"/>
    <input type="submit" name="submit" value="Submit" />
  </form> -->
  <!-- <input type="button" value="Submit"  /> -->
  <script>

    const setHeader = (data) => {
      console.log(data);
      document.querySelector('div').textContent = data.status;
    };

    document.querySelector('#getBtn').onclick = () => {
      console.log('请求接口');
      fetch(
        'http://127.0.0.1:9000/api/user/getUserInfo',
        {method: 'GET'}
      )
        .then((res) => {
          console.log(res);
          res.json().then((data) => {
                                      // console.log(data);
                                      setHeader(data);
                                    });
        });
    };

    document.querySelector('#postBtn').onclick = () => {
      console.log('请求接口');
      fetch(
        'http://127.0.0.1:9000/api/user/setUserInfo',
        {method: 'POST', body: JSON.stringify({nickname: 'Jerry', sex: 0})}
      ).then((res) => {
        console.log(res, new Date().getTime());
        if (res.ok) {
          res.json().then((data) => {
             console.log(data);
            // setHeader(data);
          });
        }
      });
    };

    document.querySelector('#putBtn').onclick = () => {
      console.log('请求接口', '更新');
      fetch(
        'http://127.0.0.1:9000/api/user/setUserInfo',
        {method: 'PUT', body: JSON.stringify({nickname: 'Reri', sex: 0})}
      ).then((res) => {
        console.log(res, new Date().getTime());
        if (res.ok) {
          res.json().then((data) => {
             console.log(data);
            // setHeader(data);
          });
        }
      });
    };

    document.querySelector('#deleteBtn').onclick = () => {
      console.log('请求接口', '删除');
      fetch(
        'http://127.0.0.1:9000/api/user/setUserInfo',
        {method: 'DELETE', body: JSON.stringify({nickname: 'Jerry', sex: 0})}
      ).then((res) => {
        console.log(res, new Date().getTime());
        if (res.ok) {
          res.json().then((data) => {
             console.log(data);
            // setHeader(data);
          });
        }
      });
    };

  </script>
</body>
</html>